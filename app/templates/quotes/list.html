{% extends 'base.html' %}
{% import 'components/macros.html' as ui %}
{% block title %}Quotes{% endblock %}
{% block content %}
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
  <h3>Quotes</h3>
  <a href="{{ url_for('quotes.create_quote') }}" class="btn btn-primary">New Quote</a>
</div>
<div class="table-wrap">
<table class="table">
  <thead><tr><th>ID</th><th>Total</th><th>Status</th><th>PDF</th><th>Actions</th></tr></thead>
  <tbody>
    {% for quote in quotes %}
    <tr>
      <td>#{{ quote.id }}</td>
      <td>{{ quote.total }} {{ quote.currency }}</td>
      <td>{{ ui.status_badge(quote.status) }}</td>
      <td><a href="{{ url_for('quotes.download_quote_pdf', quote_id=quote.id) }}">Download</a></td>
      <td>
        {% if quote.status == 'draft' %}
          <form method="post" action="{{ url_for('quotes.send_quote', quote_id=quote.id) }}" style="display:inline"><button class="btn btn-secondary">Send</button></form>
        {% endif %}
        {% if quote.status in ['sent', 'draft'] %}
          <form method="post" action="{{ url_for('quotes.accept_quote', quote_id=quote.id) }}" style="display:inline"><button class="btn btn-success">Accept</button></form>
        {% endif %}
      </td>
    </tr>
    {% else %}
    <tr><td colspan="5">No quotes yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}

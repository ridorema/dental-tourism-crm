{% extends 'base.html' %}
{% block title %}Lead Timeline{% endblock %}
{% block content %}
<div class="card">
  <h3>Unified Timeline: {{ lead.first_name }} {{ lead.last_name }}</h3>
  <ul class="timeline">
    {% for e in events %}
      <li><small>{{ e.at }}</small><br><strong>{{ e.type }}: {{ e.title }}</strong><br>{{ e.body }}</li>
    {% else %}
      <li>No timeline events.</li>
    {% endfor %}
  </ul>
  <div style="display:flex;gap:8px;margin-top:12px;">
    {% if page > 1 %}<a class="btn btn-secondary" href="{{ url_for('communications.lead_timeline', lead_id=lead.id, page=page-1) }}">Previous</a>{% endif %}
    {% if has_next %}<a class="btn btn-secondary" href="{{ url_for('communications.lead_timeline', lead_id=lead.id, page=page+1) }}">Next</a>{% endif %}
  </div>
</div>
{% endblock %}
